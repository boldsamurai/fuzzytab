<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>New Tab</title>
  <link rel="stylesheet" href="newtab.css">
</head>
<body>
  <div id="background"></div>

  <!-- Search Section (fixed top) -->
  <div class="search-section">
    <div class="search-container">
      <input type="text" id="search-input" placeholder="Search bookmarks..." autofocus>
    </div>
  </div>

  <!-- Bookmarks Section (scrollable middle) -->
  <div class="bookmarks-section">
    <div class="bookmarks-container">
      <div id="bookmarks-tree"></div>
    </div>
  </div>

  <!-- Pinned Bookmarks Bar (fixed bottom) -->
  <div id="pinned-bar" class="pinned-bar">
    <div class="pinned-bar-inner">
      <div id="pinned-bookmarks" class="pinned-bookmarks"></div>
    </div>
  </div>

  <div id="floating-buttons" class="floating-buttons">
    <button id="help-button" class="floating-btn" title="Keyboard shortcuts (Ctrl+Alt+/)">?</button>

    <button id="stats-button" class="floating-btn" title="Statistics (Ctrl+Alt+S)">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="20" x2="18" y2="10"/>
        <line x1="12" y1="20" x2="12" y2="4"/>
        <line x1="6" y1="20" x2="6" y2="14"/>
      </svg>
    </button>

    <div id="add-button-container" class="add-button-container">
      <button id="add-button" class="floating-btn" data-i18n-attr="title:btn.add.title">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>
      <div id="add-menu" class="add-menu hidden">
        <div class="add-menu-item" data-action="new-bookmark">
          <span>üìÑ</span>
          <span data-i18n="add.bookmark">New bookmark</span>
          <span class="shortcut">Ctrl+Alt+N</span>
        </div>
        <div class="add-menu-item" data-action="new-folder">
          <span>üìÅ</span>
          <span data-i18n="add.folder">New folder</span>
          <span class="shortcut">Ctrl+Alt+M</span>
        </div>
      </div>
    </div>

    <button id="settings-button" class="floating-btn" title="Settings (Alt+S)">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
      </svg>
    </button>

    <button id="bg-button" class="floating-btn" data-i18n-attr="title:btn.bg.title">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
        <circle cx="8.5" cy="8.5" r="1.5"/>
        <polyline points="21 15 16 10 5 21"/>
      </svg>
    </button>
  </div>
  <input type="file" id="bg-input" accept="image/*" hidden>

  <!-- Context Menu -->
  <div id="context-menu" class="context-menu hidden">
    <div class="context-menu-item" data-action="open-new-tab" id="context-open-new-tab">
      <span data-i18n="ctx.openNewTab">Open in new tab</span>
      <span class="shortcut">Shift+Enter</span>
    </div>
    <div class="context-menu-separator" id="context-open-new-tab-separator"></div>
    <div class="context-menu-item" data-action="new-bookmark">
      <span data-i18n="ctx.newBookmark">New bookmark here</span>
      <span class="shortcut">Ctrl+Alt+N</span>
    </div>
    <div class="context-menu-item" data-action="new-folder">
      <span data-i18n="ctx.newFolder">New folder here</span>
      <span class="shortcut">Ctrl+Alt+M</span>
    </div>
    <div class="context-menu-separator" id="context-open-all-separator"></div>
    <div class="context-menu-item" data-action="open-all" id="context-open-all">
      <span data-i18n="ctx.openAll">Open all</span>
      <span class="shortcut">Ctrl+Alt+O</span>
    </div>
    <div class="context-menu-separator" id="context-pin-separator"></div>
    <div class="context-menu-item" data-action="pin" id="context-pin">
      <span data-i18n="ctx.pin">Pin</span>
      <span class="shortcut">Alt+.</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="edit">
      <span data-i18n="ctx.edit">Edit</span>
      <span class="shortcut">Ctrl+Alt+E</span>
    </div>
    <div class="context-menu-item" data-action="move">
      <span data-i18n="ctx.move">Move</span>
      <span class="shortcut">Ctrl+Alt+R</span>
    </div>
    <div class="context-menu-item danger" data-action="delete">
      <span data-i18n="ctx.delete">Delete</span>
      <span class="shortcut">Delete</span>
    </div>
  </div>

  <!-- Modal Overlay -->
  <div id="modal-overlay" class="modal-overlay hidden" tabindex="-1">
    <!-- Delete Confirmation -->
    <div id="delete-modal" class="modal hidden">
      <div class="modal-header" data-i18n="modal.delete.headerBookmark">Delete bookmark</div>
      <div class="modal-body">
        <p><span class="modal-delete-body-text" data-i18n="modal.delete.bodyBookmark">Are you sure you want to delete this bookmark:</span></p>
        <p class="modal-bookmark-title"></p>
        <p class="modal-warning hidden" data-i18n="modal.delete.warning">This folder contains bookmarks ‚Äî all of them will be deleted!</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.delete.cancel">Cancel (Esc)</button>
        <button class="btn btn-danger" data-action="confirm" data-i18n="modal.delete.confirm">Delete (Enter)</button>
      </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal hidden">
      <div class="modal-header" data-i18n="modal.edit.headerBookmark">Edit bookmark</div>
      <div class="modal-body">
        <label>
          <span data-i18n="modal.edit.title">Title</span>
          <input type="text" id="edit-title" class="modal-input">
        </label>
        <label id="edit-url-label">
          <span data-i18n="modal.edit.url">URL</span>
          <input type="text" id="edit-url" class="modal-input">
        </label>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.edit.cancel">Cancel (Esc)</button>
        <button class="btn btn-primary" data-action="confirm" data-i18n="modal.edit.confirm">Save (Enter)</button>
      </div>
    </div>

    <!-- Move Modal -->
    <div id="move-modal" class="modal hidden">
      <div class="modal-header" data-i18n="modal.move.header">Move bookmark</div>
      <div class="modal-body">
        <p class="modal-bookmark-title"></p>
        <p class="modal-subtitle" data-i18n="modal.move.subtitle">Enter: inside/after | Ctrl+Enter: below | Ctrl+Shift+Enter: above</p>
        <div id="folder-list" class="folder-list"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.move.cancel">Cancel (Esc)</button>
        <button class="btn btn-primary" data-action="confirm" data-i18n="modal.move.confirm">Move (Enter)</button>
      </div>
    </div>

    <!-- New Bookmark Modal -->
    <div id="new-bookmark-modal" class="modal hidden">
      <div class="modal-header" data-i18n="modal.newBookmark.header">New bookmark</div>
      <div class="modal-body">
        <label>
          <span data-i18n="modal.newBookmark.title">Title</span>
          <input type="text" id="new-bookmark-title" class="modal-input" data-i18n-attr="placeholder:modal.newBookmark.titlePlaceholder">
        </label>
        <label>
          <span data-i18n="modal.newBookmark.url">URL</span>
          <input type="text" id="new-bookmark-url" class="modal-input" placeholder="https://...">
        </label>
        <p class="modal-subtitle" data-i18n="modal.newBookmark.subtitle">Navigation: Ctrl+arrows</p>
        <div id="new-bookmark-folder-list" class="folder-list"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.newBookmark.cancel">Cancel (Esc)</button>
        <button class="btn btn-primary" data-action="confirm" data-i18n="modal.newBookmark.confirm">Create (Enter)</button>
      </div>
    </div>

    <!-- New Folder Modal -->
    <div id="new-folder-modal" class="modal hidden">
      <div class="modal-header" data-i18n="modal.newFolder.header">New folder</div>
      <div class="modal-body">
        <label>
          <span data-i18n="modal.newFolder.name">Folder name</span>
          <input type="text" id="new-folder-name" class="modal-input" data-i18n-attr="placeholder:modal.newFolder.namePlaceholder">
        </label>
        <p class="modal-subtitle" data-i18n="modal.newFolder.subtitle">Navigation: Ctrl+arrows</p>
        <div id="new-folder-folder-list" class="folder-list"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.newFolder.cancel">Cancel (Esc)</button>
        <button class="btn btn-primary" data-action="confirm" data-i18n="modal.newFolder.confirm">Create (Enter)</button>
      </div>
    </div>

    <!-- Duplicate Warning Modal -->
    <div id="duplicate-modal" class="modal hidden">
      <div class="modal-header" data-i18n="modal.duplicate.header">Bookmark already exists</div>
      <div class="modal-body">
        <p data-i18n="modal.duplicate.body">This bookmark already exists in the following locations:</p>
        <div id="duplicate-list" class="duplicate-list"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.duplicate.cancel">Cancel (Esc)</button>
        <button class="btn btn-primary" data-action="confirm" data-i18n="modal.duplicate.confirm">Add anyway (Enter)</button>
      </div>
    </div>

    <!-- Stats Modal -->
    <div id="stats-modal" class="modal modal-wide hidden">
      <div class="modal-header" data-i18n="modal.stats.header">Bookmark statistics</div>
      <div class="modal-body">
        <div class="stats-grid">
          <div class="stats-card">
            <div class="stats-card-value" id="stats-bookmarks-count">0</div>
            <div class="stats-card-label" data-i18n="modal.stats.bookmarks">Bookmarks</div>
          </div>
          <div class="stats-card">
            <div class="stats-card-value" id="stats-folders-count">0</div>
            <div class="stats-card-label" data-i18n="modal.stats.folders">Folders</div>
          </div>
          <div class="stats-card">
            <div class="stats-card-value" id="stats-domains-count">0</div>
            <div class="stats-card-label" data-i18n="modal.stats.domains">Domains</div>
          </div>
          <div class="stats-card">
            <div class="stats-card-value" id="stats-visits-count">0</div>
            <div class="stats-card-label" data-i18n="modal.stats.visits">Visits</div>
          </div>
        </div>

        <div class="stats-section">
          <h3 data-i18n="modal.stats.topVisited">Most visited</h3>
          <div id="stats-top-visited" class="stats-list"></div>
        </div>

        <div class="stats-section">
          <h3 data-i18n="modal.stats.foldersChart">Pages per folder distribution</h3>
          <div id="stats-folders-chart" class="stats-chart"></div>
        </div>

        <div class="stats-section">
          <h3 data-i18n="modal.stats.domainsChart">Bookmarks per domain</h3>
          <div id="stats-domains-chart" class="stats-chart"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.stats.close">Close (Esc)</button>
      </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal modal-wide hidden">
      <div class="modal-header" data-i18n="modal.help.header">Keyboard shortcuts</div>
      <div class="modal-body">
        <div class="help-sections" id="help-sections-container"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="modal.help.close">Close (Esc)</button>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal modal-settings hidden">
      <div class="modal-header" data-i18n="settings.header">Settings</div>
      <div class="settings-layout">
        <nav class="settings-nav">
          <button class="settings-nav-item active" data-category="appearance">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 2a7 7 0 0 0 0 14 4 4 0 0 1 0 8 10 10 0 0 0 0-20z"/></svg>
            <span data-i18n="settings.nav.appearance">Appearance</span>
          </button>
          <button class="settings-nav-item" data-category="navigation">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
            <span data-i18n="settings.nav.navigation">Navigation</span>
          </button>
          <button class="settings-nav-item" data-category="shortcuts">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M6 8h.001M10 8h.001M14 8h.001M18 8h.001M8 12h.001M12 12h.001M16 12h.001M8 16h8"/></svg>
            <span data-i18n="settings.nav.shortcuts">Shortcuts</span>
          </button>
          <button class="settings-nav-item" data-category="search">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <span data-i18n="settings.nav.search">Search</span>
          </button>
          <button class="settings-nav-item" data-category="pinned">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"/></svg>
            <span data-i18n="settings.nav.pinned">Pinned</span>
          </button>
          <button class="settings-nav-item" data-category="ui">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
            <span data-i18n="settings.nav.ui">Interface</span>
          </button>
          <button class="settings-nav-item" data-category="data">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
            <span data-i18n="settings.nav.data">Data</span>
          </button>
        </nav>
        <div class="settings-content">
          <div class="settings-panel active" data-panel="appearance">
            <h3 data-i18n="settings.appearance.header">Appearance</h3>

            <div class="settings-group" id="settings-language-group">
              <label class="settings-label" data-i18n="settings.appearance.language">Language</label>
              <select class="settings-select" id="settings-language-select">
                <option value="en">English</option>
                <option value="pl">Polski</option>
              </select>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.appearance.theme">Theme</label>
              <div class="settings-theme-grid" id="settings-theme-grid"></div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.appearance.accentColor">Accent color</label>
              <div class="settings-accent-grid" id="settings-accent-grid"></div>
            </div>

            <div class="settings-group">
              <button class="settings-collapsible" id="settings-custom-colors-toggle">
                <span data-i18n="settings.appearance.customColors">Customize colors</span>
                <svg class="settings-collapsible-arrow" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="settings-custom-colors hidden" id="settings-custom-colors"></div>
            </div>

            <div class="settings-group">
              <button class="settings-collapsible" id="settings-presets-toggle">
                <span data-i18n="settings.appearance.presets">Color presets</span>
                <svg class="settings-collapsible-arrow" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="settings-presets hidden" id="settings-presets">
                <div class="settings-presets-list" id="settings-presets-list"></div>
                <div class="settings-preset-save">
                  <input type="text" class="settings-preset-input" id="settings-preset-name" data-i18n-attr="placeholder:settings.appearance.presetPlaceholder">
                  <button class="settings-preset-save-btn" id="settings-preset-save-btn" data-i18n="settings.appearance.presetSave">Save</button>
                </div>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.appearance.bgOpacity">Background opacity</span> <span class="settings-value" id="settings-bg-opacity-value">0.3</span></label>
              <input type="range" class="settings-slider" id="settings-bg-opacity" min="0" max="1" step="0.05" value="0.3">
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.appearance.density">Display density</label>
              <div class="settings-density-group" id="settings-density-group">
                <button class="settings-density-btn" data-density="compact" data-i18n="settings.appearance.compact">Compact</button>
                <button class="settings-density-btn active" data-density="normal" data-i18n="settings.appearance.normal">Normal</button>
                <button class="settings-density-btn" data-density="spacious" data-i18n="settings.appearance.spacious">Spacious</button>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.appearance.contentWidth">Content width</span> <span class="settings-value" id="settings-width-value">800px</span></label>
              <input type="range" class="settings-slider" id="settings-content-width" min="600" max="1200" step="50" value="800">
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.appearance.searchFontSize">Search font size</span> <span class="settings-value" id="settings-font-value">18px</span></label>
              <input type="range" class="settings-slider" id="settings-search-font" min="14" max="24" step="1" value="18">
            </div>

            <div class="settings-group">
              <label class="settings-label settings-toggle-label">
                <span data-i18n="settings.appearance.showVisits">Show visit counter</span>
                <input type="checkbox" id="settings-show-visits" checked>
                <span class="settings-toggle"></span>
              </label>
            </div>
          </div>
          <div class="settings-panel" data-panel="navigation">
            <h3 data-i18n="settings.navigation.header">Navigation and behavior</h3>

            <div class="settings-group">
              <label class="settings-label settings-toggle-label">
                <span data-i18n="settings.navigation.doubleClick">Double click opens bookmark</span>
                <input type="checkbox" id="settings-double-click">
                <span class="settings-toggle"></span>
              </label>
            </div>

            <div class="settings-group">
              <label class="settings-label settings-toggle-label">
                <span data-i18n="settings.navigation.middleClick">Middle mouse button ‚Äî new tab</span>
                <input type="checkbox" id="settings-middle-click" checked>
                <span class="settings-toggle"></span>
              </label>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.navigation.folderState">Folder state on startup</label>
              <div class="settings-density-group">
                <button class="settings-density-btn settings-folder-state-btn active" data-folder-state="remembered" data-i18n="settings.navigation.remembered">Remembered</button>
                <button class="settings-density-btn settings-folder-state-btn" data-folder-state="collapsed" data-i18n="settings.navigation.collapsed">Collapsed</button>
                <button class="settings-density-btn settings-folder-state-btn" data-folder-state="expanded" data-i18n="settings.navigation.expanded">Expanded</button>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.navigation.defaultFolderStates">Default root folder states</label>
              <div class="settings-btn-visibility" id="settings-default-folder-states"></div>
            </div>

            <div class="settings-group">
              <label class="settings-label settings-toggle-label">
                <span data-i18n="settings.navigation.warnDuplicate">Duplicate URL warning</span>
                <input type="checkbox" id="settings-warn-duplicate" checked>
                <span class="settings-toggle"></span>
              </label>
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.navigation.openAllThreshold">Open all confirmation threshold</span> <span class="settings-value" id="settings-open-all-threshold-value">5</span></label>
              <input type="range" class="settings-slider" id="settings-open-all-threshold" min="0" max="30" step="1" value="5">
              <span class="settings-hint" data-i18n="settings.navigation.openAllHint">0 = no confirmation</span>
            </div>
          </div>
          <div class="settings-panel" data-panel="shortcuts">
            <h3 data-i18n="settings.shortcuts.header">Keyboard shortcuts</h3>
            <div id="settings-shortcuts-container"></div>
          </div>
          <div class="settings-panel" data-panel="search">
            <h3 data-i18n="settings.search.header">Search</h3>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.search.debounce">Search delay</span> <span class="settings-value" id="settings-debounce-value">100ms</span></label>
              <input type="range" class="settings-slider" id="settings-search-debounce" min="0" max="500" step="25" value="100">
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.search.scope">Search scope</label>
              <div class="settings-density-group">
                <button class="settings-density-btn settings-search-scope-btn active" data-scope="both" data-i18n="settings.search.scopeBoth">Title + URL</button>
                <button class="settings-density-btn settings-search-scope-btn" data-scope="title" data-i18n="settings.search.scopeTitle">Title only</button>
                <button class="settings-density-btn settings-search-scope-btn" data-scope="url" data-i18n="settings.search.scopeUrl">URL only</button>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.search.placeholder">Placeholder</label>
              <input type="text" class="modal-input" id="settings-search-placeholder" value="Search bookmarks..." data-i18n-attr="placeholder:settings.search.placeholderPlaceholder">
            </div>
          </div>
          <div class="settings-panel" data-panel="pinned">
            <h3 data-i18n="settings.pinned.header">Pinned bookmarks</h3>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.pinned.limit">Pinned limit</span> <span class="settings-value" id="settings-pinned-limit-value">10</span></label>
              <input type="range" class="settings-slider" id="settings-pinned-limit" min="3" max="20" step="1" value="10">
            </div>

            <div class="settings-group">
              <label class="settings-label settings-toggle-label">
                <span data-i18n="settings.pinned.showEmpty">Show bar when no pinned</span>
                <input type="checkbox" id="settings-pinned-show-empty">
                <span class="settings-toggle"></span>
              </label>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.pinned.iconSize">Icon size</label>
              <div class="settings-density-group">
                <button class="settings-density-btn settings-pinned-size-btn" data-pinned-size="small" data-i18n="settings.pinned.small">Small</button>
                <button class="settings-density-btn settings-pinned-size-btn active" data-pinned-size="normal" data-i18n="settings.pinned.normal">Normal</button>
                <button class="settings-density-btn settings-pinned-size-btn" data-pinned-size="large" data-i18n="settings.pinned.large">Large</button>
              </div>
            </div>
          </div>
          <div class="settings-panel" data-panel="ui">
            <h3 data-i18n="settings.ui.header">Interface elements</h3>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.ui.buttonVisibility">Button visibility</label>
              <div class="settings-btn-visibility">
                <label class="settings-label settings-toggle-label">
                  <span data-i18n="settings.ui.btnHelp">Help (?)</span>
                  <input type="checkbox" id="settings-show-help-btn" checked>
                  <span class="settings-toggle"></span>
                </label>
                <label class="settings-label settings-toggle-label">
                  <span data-i18n="settings.ui.btnStats">Statistics</span>
                  <input type="checkbox" id="settings-show-stats-btn" checked>
                  <span class="settings-toggle"></span>
                </label>
                <label class="settings-label settings-toggle-label">
                  <span data-i18n="settings.ui.btnAdd">Add</span>
                  <input type="checkbox" id="settings-show-add-btn" checked>
                  <span class="settings-toggle"></span>
                </label>
                <label class="settings-label settings-toggle-label">
                  <span data-i18n="settings.ui.btnBg">Background</span>
                  <input type="checkbox" id="settings-show-bg-btn" checked>
                  <span class="settings-toggle"></span>
                </label>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.ui.buttonPosition">Button position</label>
              <div class="settings-position-grid" id="settings-buttons-position">
                <button class="settings-position-btn" data-position="top-left" data-i18n-attr="title:position.topLeft">&#8598;</button>
                <button class="settings-position-btn" data-position="top-right" data-i18n-attr="title:position.topRight">&#8599;</button>
                <button class="settings-position-btn" data-position="bottom-left" data-i18n-attr="title:position.bottomLeft">&#8601;</button>
                <button class="settings-position-btn active" data-position="bottom-right" data-i18n-attr="title:position.bottomRight">&#8600;</button>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.ui.buttonOrder">Button order</label>
              <div class="settings-buttons-order" id="settings-buttons-order"></div>
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.ui.statsVisited">Statistics ‚Äî "Top visited" limit</span> <span class="settings-value" id="settings-stats-visited-value">10</span></label>
              <input type="range" class="settings-slider" id="settings-stats-visited" min="3" max="25" step="1" value="10">
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.ui.statsFolders">Statistics ‚Äî "Top folders" limit</span> <span class="settings-value" id="settings-stats-folders-value">8</span></label>
              <input type="range" class="settings-slider" id="settings-stats-folders" min="3" max="20" step="1" value="8">
            </div>

            <div class="settings-group">
              <label class="settings-label"><span data-i18n="settings.ui.statsDomains">Statistics ‚Äî "Top domains" limit</span> <span class="settings-value" id="settings-stats-domains-value">8</span></label>
              <input type="range" class="settings-slider" id="settings-stats-domains" min="3" max="20" step="1" value="8">
            </div>
          </div>
          <div class="settings-panel" data-panel="data">
            <h3 data-i18n="settings.data.header">Data</h3>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.data.bookmarks">Bookmarks</label>
              <div class="settings-data-actions">
                <button class="btn btn-secondary" id="settings-export-bookmarks" data-i18n="settings.data.exportBookmarks">Export bookmarks</button>
                <button class="btn btn-secondary" id="settings-import-bookmarks" data-i18n="settings.data.importBookmarks">Import bookmarks</button>
                <input type="file" id="settings-import-bookmarks-input" accept=".html,.htm" hidden>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.data.settingsBackup">Settings backup</label>
              <div class="settings-data-actions">
                <button class="btn btn-secondary" id="settings-export" data-i18n="settings.data.exportSettings">Export settings</button>
                <button class="btn btn-secondary" id="settings-import" data-i18n="settings.data.importSettings">Import settings</button>
                <input type="file" id="settings-import-input" accept=".json" hidden>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" data-i18n="settings.data.resetData">Reset data</label>
              <div class="settings-data-actions">
                <button class="btn btn-danger-outline" id="settings-reset-visits" data-i18n="settings.data.resetVisits">Reset visit counters</button>
                <button class="btn btn-danger-outline" id="settings-reset-folders" data-i18n="settings.data.resetFolders">Reset folder states</button>
                <button class="btn btn-danger-outline" id="settings-reset-pinned" data-i18n="settings.data.resetPinned">Reset pinned bookmarks</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-action="cancel" data-i18n="settings.close">Close (Esc)</button>
      </div>
    </div>
  </div>

  <script src="i18n.js"></script>
  <script src="newtab.js"></script>
</body>
</html>
